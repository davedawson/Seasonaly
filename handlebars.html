<!DOCTYPE HTML>

<html>
  <head>
    <title>What's in Season</title>
    <link href="favicon.ico" rel="icon" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="//cloud.typography.com/7750432/683202/css/fonts.css" />
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
    <!--[if IE]>
        <link href="/stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <![endif]-->
    <!-- <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script> -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="/js/mustache.js"></script>
    <script src="/js/jquery-mustache.js"></script>
    <script src="/js/handlebars.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="For us who can't spell and don't know much about seasonal fruits or veggies.">
  </head>

  <body>
    <section class="header">
      <h1><a href="/">What's in Season</a></h1>
      <a href="#" class="explain"><span>What is this</span>&darr;</a>
      <div class="explanation">
        <p>What's in Seasons Today is a tiny website for people that don't know that much about fruits &amp; veggies. This page simply lists the fruits and vegetables that are in season today. <a href="/purpose">Read why &rarr;</a></p>
      </div>
      <div class="today">
        <p><b>Summer:</b> <em></em>, <strong></strong>, in <span>the Northeast</span></p>
      </div>
    </section>
    <section class="base">

      <ul id="food-list">
      </ul>
    </section>
    <script>
    </script>
    <script id="food-data" type="text/x-handlebars-template">
      {{#foods}}
        {{#ifCond locations.nyc.months 7}}
          <li>
            <a href="#" class="{{type}}">
              <h2>{{title}}</h2>
              <div class="more-info">
                <p><strong>Check ripeness: </strong>{{description}}</p>
                <p><strong>Source: </strong> {{source}}</p>
              </div>
            </a>
          </li>

        {{/ifCond}}
      {{/foods}}
    </script>
    <script>
    var json = null

    $.getJSON('/json/fv.json', function(data) {
      Handlebars.registerHelper('ifCond', function(v1, v2, options) {
        if($.inArray(v2, v1) != -1)
          {
            return options.fn(this);
          }
      return options.inverse(this);
      });
      console.log( 'json loaded' );
      // Put JSON into variable
      json = data;

      // Create variable based on the handlebars template above
      var source = $('#food-data').html();

      // compile the template
      var template = Handlebars.compile(source);

      // Send that to the page
      $('#food-list').html(template(json));
      moreInfo();
    });
    </script>
    <script src="/js/index.js"></script>
  </body>
</html>